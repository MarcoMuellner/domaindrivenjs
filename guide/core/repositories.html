<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.21" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const useChoice = localStorage.getItem('vuepress-color-scheme')
      const systemStatus =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (useChoice === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (useChoice === 'dark' || systemStatus) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <link rel="icon" href="/images/logo.png"><meta name="theme-color" content="#3498db"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><title>Working with Repositories | DomainDrivenJS</title><meta name="description" content="A modern, composition-based Domain-Driven Design library for JavaScript">
    <link rel="preload" href="/domaindrivenjs/assets/style-rouI_F76.css" as="style"><link rel="stylesheet" href="/domaindrivenjs/assets/style-rouI_F76.css">
    <link rel="modulepreload" href="/domaindrivenjs/assets/app-BMHK6CJ7.js"><link rel="modulepreload" href="/domaindrivenjs/assets/repositories.html-6FrVvuh-.js">
    <link rel="prefetch" href="/domaindrivenjs/assets/index.html-BVll-hDD.js" as="script"><link rel="prefetch" href="/domaindrivenjs/assets/banking.html-DmyAecSR.js" as="script"><link rel="prefetch" href="/domaindrivenjs/assets/e-commerce.html-b-Ukq8wp.js" as="script"><link rel="prefetch" href="/domaindrivenjs/assets/index.html-DkT6CPkf.js" as="script"><link rel="prefetch" href="/domaindrivenjs/assets/task-management.html-D8OtRf80.js" as="script"><link rel="prefetch" href="/domaindrivenjs/assets/aggregates.html-DbTdUeFW.js" as="script"><link rel="prefetch" href="/domaindrivenjs/assets/domain-events.html-CtxrzaiO.js" as="script"><link rel="prefetch" href="/domaindrivenjs/assets/domain-services.html-Dieqbwix.js" as="script"><link rel="prefetch" href="/domaindrivenjs/assets/entities.html-Wb2f5ZhS.js" as="script"><link rel="prefetch" href="/domaindrivenjs/assets/index.html-DdvVzLrY.js" as="script"><link rel="prefetch" href="/domaindrivenjs/assets/repositories.html-CL_vKWMs.js" as="script"><link rel="prefetch" href="/domaindrivenjs/assets/specifications.html-5wktJxBj.js" as="script"><link rel="prefetch" href="/domaindrivenjs/assets/value-objects.html-Ba7ELWIw.js" as="script"><link rel="prefetch" href="/domaindrivenjs/assets/getting-started.html-2X22HAk0.js" as="script"><link rel="prefetch" href="/domaindrivenjs/assets/quick-start.html-B0-81n_U.js" as="script"><link rel="prefetch" href="/domaindrivenjs/assets/antipatterns.html-CuUYTri1.js" as="script"><link rel="prefetch" href="/domaindrivenjs/assets/best-practices.html-CBqOxeRT.js" as="script"><link rel="prefetch" href="/domaindrivenjs/assets/extending-components.html-nHnvp_f-.js" as="script"><link rel="prefetch" href="/domaindrivenjs/assets/testing.html-WWo07NVK.js" as="script"><link rel="prefetch" href="/domaindrivenjs/assets/aggregates.html-Dt8NZopr.js" as="script"><link rel="prefetch" href="/domaindrivenjs/assets/domain-events.html-D_pA1WTg.js" as="script"><link rel="prefetch" href="/domaindrivenjs/assets/domain-services.html-DClf3-Cx.js" as="script"><link rel="prefetch" href="/domaindrivenjs/assets/entities.html-DAlxurgk.js" as="script"><link rel="prefetch" href="/domaindrivenjs/assets/index.html-DXLVikso.js" as="script"><link rel="prefetch" href="/domaindrivenjs/assets/specifications.html-BrNBYNrM.js" as="script"><link rel="prefetch" href="/domaindrivenjs/assets/value-objects.html-C41YYHxA.js" as="script"><link rel="prefetch" href="/domaindrivenjs/assets/index.html-CVjpEAec.js" as="script"><link rel="prefetch" href="/domaindrivenjs/assets/strategic-design.html-CoKm9Kho.js" as="script"><link rel="prefetch" href="/domaindrivenjs/assets/tactical-design.html-DegKmWPS.js" as="script"><link rel="prefetch" href="/domaindrivenjs/assets/ubiquitous-language.html--iNAIg6E.js" as="script"><link rel="prefetch" href="/domaindrivenjs/assets/404.html-DYzqF3P7.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/domaindrivenjs/"><img class="vp-site-logo" src="/domaindrivenjs/images/logo.png" alt="DomainDrivenJS"><span class="vp-site-name vp-hide-mobile" aria-hidden="true">DomainDrivenJS</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/domaindrivenjs/" aria-label="Home"><!--[--><!--[--><!--]--><!--]-->Home<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Guide"><span class="title">Guide</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Guide"><span class="title">Guide</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/domaindrivenjs/guide/getting-started.html" aria-label="Getting Started"><!--[--><!--[--><!--]--><!--]-->Getting Started<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/domaindrivenjs/guide/quick-start.html" aria-label="Quick Start"><!--[--><!--[--><!--]--><!--]-->Quick Start<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/domaindrivenjs/guide/ddd/" aria-label="DDD Fundamentals"><!--[--><!--[--><!--]--><!--]-->DDD Fundamentals<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/domaindrivenjs/guide/core/" aria-label="Core Concepts"><!--[--><!--[--><!--]--><!--]-->Core Concepts<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/domaindrivenjs/guide/advanced/" aria-label="Advanced Topics"><!--[--><!--[--><!--]--><!--]-->Advanced Topics<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/domaindrivenjs/api/" aria-label="API"><!--[--><!--[--><!--]--><!--]-->API<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/domaindrivenjs/examples/" aria-label="Examples"><!--[--><!--[--><!--]--><!--]-->Examples<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/MarcoMuellner/DomainDrivenJS" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->GitHub<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="Search documentation" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/domaindrivenjs/" aria-label="Home"><!--[--><!--[--><!--]--><!--]-->Home<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Guide"><span class="title">Guide</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Guide"><span class="title">Guide</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/domaindrivenjs/guide/getting-started.html" aria-label="Getting Started"><!--[--><!--[--><!--]--><!--]-->Getting Started<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/domaindrivenjs/guide/quick-start.html" aria-label="Quick Start"><!--[--><!--[--><!--]--><!--]-->Quick Start<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/domaindrivenjs/guide/ddd/" aria-label="DDD Fundamentals"><!--[--><!--[--><!--]--><!--]-->DDD Fundamentals<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/domaindrivenjs/guide/core/" aria-label="Core Concepts"><!--[--><!--[--><!--]--><!--]-->Core Concepts<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/domaindrivenjs/guide/advanced/" aria-label="Advanced Topics"><!--[--><!--[--><!--]--><!--]-->Advanced Topics<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/domaindrivenjs/api/" aria-label="API"><!--[--><!--[--><!--]--><!--]-->API<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/domaindrivenjs/examples/" aria-label="Examples"><!--[--><!--[--><!--]--><!--]-->Examples<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/MarcoMuellner/DomainDrivenJS" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->GitHub<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">Introduction <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/domaindrivenjs/guide/getting-started.html" aria-label="Getting Started with DomainDrivenJS"><!--[--><!--[--><!--]--><!--]-->Getting Started with DomainDrivenJS<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/domaindrivenjs/guide/quick-start.html" aria-label="Quick Start Guide"><!--[--><!--[--><!--]--><!--]-->Quick Start Guide<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">DDD Fundamentals <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/domaindrivenjs/guide/ddd/" aria-label="Introduction to Domain-Driven Design"><!--[--><!--[--><!--]--><!--]-->Introduction to Domain-Driven Design<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/domaindrivenjs/guide/ddd/strategic-design.html" aria-label="Strategic Design in Domain-Driven Design"><!--[--><!--[--><!--]--><!--]-->Strategic Design in Domain-Driven Design<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/domaindrivenjs/guide/ddd/tactical-design.html" aria-label="Tactical Design in Domain-Driven Design"><!--[--><!--[--><!--]--><!--]-->Tactical Design in Domain-Driven Design<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/domaindrivenjs/guide/ddd/ubiquitous-language.html" aria-label="Ubiquitous Language"><!--[--><!--[--><!--]--><!--]-->Ubiquitous Language<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading active">Core Concepts <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/domaindrivenjs/guide/core/value-objects.html" aria-label="Understanding Value Objects"><!--[--><!--[--><!--]--><!--]-->Understanding Value Objects<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/domaindrivenjs/guide/core/entities.html" aria-label="Working with Entities"><!--[--><!--[--><!--]--><!--]-->Working with Entities<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/domaindrivenjs/guide/core/aggregates.html" aria-label="Working with Aggregates"><!--[--><!--[--><!--]--><!--]-->Working with Aggregates<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link route-link-active auto-link vp-sidebar-item active" href="/domaindrivenjs/guide/core/repositories.html" aria-label="Working with Repositories"><!--[--><!--[--><!--]--><!--]-->Working with Repositories<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/domaindrivenjs/guide/core/domain-events.html" aria-label="Working with Domain Events"><!--[--><!--[--><!--]--><!--]-->Working with Domain Events<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/domaindrivenjs/guide/core/specifications.html" aria-label="Working with Specifications"><!--[--><!--[--><!--]--><!--]-->Working with Specifications<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/domaindrivenjs/guide/core/domain-services.html" aria-label="Working with Domain Services"><!--[--><!--[--><!--]--><!--]-->Working with Domain Services<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">Advanced Topics <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/domaindrivenjs/guide/advanced/extending-components.html" aria-label="Extending DomainDrivenJS Components"><!--[--><!--[--><!--]--><!--]-->Extending DomainDrivenJS Components<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/domaindrivenjs/guide/advanced/testing.html" aria-label="Testing Domain-Driven Design Applications"><!--[--><!--[--><!--]--><!--]-->Testing Domain-Driven Design Applications<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/domaindrivenjs/guide/advanced/best-practices.html" aria-label="Domain-Driven Design Best Practices"><!--[--><!--[--><!--]--><!--]-->Domain-Driven Design Best Practices<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/domaindrivenjs/guide/advanced/antipatterns.html" aria-label="Domain-Driven Design Anti-Patterns"><!--[--><!--[--><!--]--><!--]-->Domain-Driven Design Anti-Patterns<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div vp-content><!--[--><!--]--><div><h1 id="working-with-repositories" tabindex="-1"><a class="header-anchor" href="#working-with-repositories"><span>Working with Repositories</span></a></h1><p>Repositories are a critical pattern in Domain-Driven Design that provides a clean separation between your domain model and your data storage. They abstract away the details of how objects are persisted and retrieved.</p><h2 id="what-is-a-repository" tabindex="-1"><a class="header-anchor" href="#what-is-a-repository"><span>What is a Repository?</span></a></h2><p>A repository is a collection-like interface that mediates between the domain model and data mapping layers, providing an illusion of an in-memory collection of domain objects. Think of it as a specialized &quot;bookshelf&quot; where your domain objects are stored and retrieved.</p><div class="hint-container tip"><p class="hint-container-title">Real-world Analogy</p><p>Think of a library. When you want a book, you don&#39;t need to know how the library organizes its shelves, its cataloging system, or where specific books are physically located. You simply ask the librarian for a book by title or author. The librarian (the repository) handles all the details of finding, retrieving, and returning the book to its proper place. Similarly, repositories in code hide all the complex details of data storage and retrieval, allowing the rest of your application to work with domain objects directly without concerning itself with how or where they&#39;re stored.</p></div><p>Key characteristics:</p><ul><li>Provides a collection-like interface for accessing domain objects</li><li>Abstracts away data storage and retrieval mechanisms</li><li>Mediates between the domain and data mapping layers</li><li>Enables testability and flexibility in your domain model</li></ul><h2 id="why-use-repositories" tabindex="-1"><a class="header-anchor" href="#why-use-repositories"><span>Why Use Repositories?</span></a></h2><p>Repositories offer several benefits:</p><ul><li><strong>Separation of concerns</strong>: Your domain logic remains pure and focused, without being entangled with database access code</li><li><strong>Improved testability</strong>: Easily swap real storage with in-memory implementations for testing</li><li><strong>Simplified domain code</strong>: Domain logic works with repositories, not data access mechanisms</li><li><strong>Storage flexibility</strong>: Change database technologies without affecting domain code</li><li><strong>Query optimization</strong>: Repositories can optimize queries based on specific storage technologies</li><li><strong>Domain focus</strong>: Repositories speak the language of the domain, not the language of the database</li></ul><h2 id="how-repositories-work" tabindex="-1"><a class="header-anchor" href="#how-repositories-work"><span>How Repositories Work</span></a></h2><p>Repositories act as a boundary between two very different worlds:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">┌─────────────────────┐     ┌───────────────┐     ┌─────────────────────┐</span>
<span class="line">│                     │     │               │     │                     │</span>
<span class="line">│   Domain Model      │◄────┤  Repository   ├────►│   Data Storage      │</span>
<span class="line">│  (Entities, etc.)   │     │               │     │  (SQL, NoSQL, etc.) │</span>
<span class="line">│                     │     │               │     │                     │</span>
<span class="line">└─────────────────────┘     └───────────────┘     └─────────────────────┘</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>On one side, the repository accepts and returns domain objects (entities, aggregates). On the other side, it translates these into the data format required by your storage technology.</p><p>When a repository saves an object:</p><ol><li>It receives a domain object</li><li>It maps the object to the storage format (e.g., SQL table rows, document JSON)</li><li>It uses the appropriate storage mechanism to persist the data</li></ol><p>When a repository retrieves an object:</p><ol><li>It queries the storage mechanism</li><li>It maps the raw data back into domain objects</li><li>It returns fully reconstituted domain objects</li></ol><h2 id="creating-repositories-with-domaindrivenjs" tabindex="-1"><a class="header-anchor" href="#creating-repositories-with-domaindrivenjs"><span>Creating Repositories with DomainDrivenJS</span></a></h2><p>DomainDrivenJS provides a straightforward way to create repositories:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> z <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;zod&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> entity<span class="token punctuation">,</span> repository <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;domaindrivenjs&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// First, let&#39;s define a simple Product entity</span></span>
<span class="line"><span class="token keyword">const</span> Product <span class="token operator">=</span> <span class="token function">entity</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Product&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">schema</span><span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token function">object</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">id</span><span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">uuid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">name</span><span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">price</span><span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token function">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">positive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">stockLevel</span><span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token function">number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">int</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">nonnegative</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">identity</span><span class="token operator">:</span> <span class="token string">&#39;id&#39;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Now, let&#39;s create a repository for our Product entity</span></span>
<span class="line"><span class="token keyword">const</span> ProductRepository <span class="token operator">=</span> <span class="token function">repository</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;ProductRepository&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">entity</span><span class="token operator">:</span> Product<span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">async</span> <span class="token function">findByName</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token comment">// This will be implemented by the adapter</span></span>
<span class="line">      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token keyword">async</span> <span class="token function">findInStock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token comment">// This will be implemented by the adapter</span></span>
<span class="line">      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">findMany</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">stockLevel</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">$gt</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token keyword">async</span> <span class="token function">updateStock</span><span class="token punctuation">(</span><span class="token parameter">id<span class="token punctuation">,</span> newStockLevel</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token comment">// This will be implemented by the adapter</span></span>
<span class="line">      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">stockLevel</span><span class="token operator">:</span> newStockLevel <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Let&#39;s break down the components:</p><ol><li><strong><code>name</code></strong>: A descriptive name for your repository</li><li><strong><code>entity</code></strong>: The entity type this repository will manage</li><li><strong><code>methods</code></strong>: Custom query and operation methods specific to this repository</li></ol><h2 id="repository-adapters" tabindex="-1"><a class="header-anchor" href="#repository-adapters"><span>Repository Adapters</span></a></h2><div class="hint-container tip"><p class="hint-container-title">Real-world Analogy</p><p>Repository adapters are like power adapters for international travel. Whether you&#39;re in Europe, Asia, or America with different wall outlets, the adapter ensures your device gets the power it needs. Similarly, repository adapters ensure your domain objects work with different storage systems (MongoDB, SQL, memory) without changing your core code.</p></div><p>A key strength of the repository pattern is its abstraction of storage details through adapters. DomainDrivenJS provides adapters for different storage systems:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> InMemoryAdapter<span class="token punctuation">,</span> MongoAdapter<span class="token punctuation">,</span> SqliteAdapter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;domaindrivenjs/adapters&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// In-memory adapter (great for testing)</span></span>
<span class="line"><span class="token keyword">const</span> inMemoryProductRepo <span class="token operator">=</span> ProductRepository<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span></span>
<span class="line">  <span class="token keyword">new</span> <span class="token class-name">InMemoryAdapter</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// MongoDB adapter</span></span>
<span class="line"><span class="token keyword">const</span> mongoProductRepo <span class="token operator">=</span> ProductRepository<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span></span>
<span class="line">  <span class="token keyword">new</span> <span class="token class-name">MongoAdapter</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">connectionString</span><span class="token operator">:</span> <span class="token string">&#39;mongodb://localhost:27017&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">database</span><span class="token operator">:</span> <span class="token string">&#39;my-shop&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">collection</span><span class="token operator">:</span> <span class="token string">&#39;products&#39;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// SQLite adapter</span></span>
<span class="line"><span class="token keyword">const</span> sqliteProductRepo <span class="token operator">=</span> ProductRepository<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span></span>
<span class="line">  <span class="token keyword">new</span> <span class="token class-name">SqliteAdapter</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;./my-shop.db&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">table</span><span class="token operator">:</span> <span class="token string">&#39;products&#39;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Each adapter implements the same interface but handles the specific details of its storage technology. This allows you to switch storage technologies with minimal code changes.</p><h2 id="using-repositories" tabindex="-1"><a class="header-anchor" href="#using-repositories"><span>Using Repositories</span></a></h2><p>Once you&#39;ve connected your repository to an adapter, you can use it to work with your entities:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token comment">// Create a new product</span></span>
<span class="line"><span class="token keyword">const</span> newProduct <span class="token operator">=</span> <span class="token keyword">await</span> productRepo<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span></span>
<span class="line">  Product<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&#39;123e4567-e89b-12d3-a456-426614174000&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Mechanical Keyboard&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">price</span><span class="token operator">:</span> <span class="token number">89.99</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">stockLevel</span><span class="token operator">:</span> <span class="token number">50</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Find a product by ID</span></span>
<span class="line"><span class="token keyword">const</span> product <span class="token operator">=</span> <span class="token keyword">await</span> productRepo<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span><span class="token string">&#39;123e4567-e89b-12d3-a456-426614174000&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Find products by criteria</span></span>
<span class="line"><span class="token keyword">const</span> inStockProducts <span class="token operator">=</span> <span class="token keyword">await</span> productRepo<span class="token punctuation">.</span><span class="token function">findInStock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> keyboardProducts <span class="token operator">=</span> <span class="token keyword">await</span> productRepo<span class="token punctuation">.</span><span class="token function">findMany</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">$contains</span><span class="token operator">:</span> <span class="token string">&#39;Keyboard&#39;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Update a product</span></span>
<span class="line"><span class="token keyword">await</span> productRepo<span class="token punctuation">.</span><span class="token function">updateStock</span><span class="token punctuation">(</span><span class="token string">&#39;123e4567-e89b-12d3-a456-426614174000&#39;</span><span class="token punctuation">,</span> <span class="token number">45</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Delete a product</span></span>
<span class="line"><span class="token keyword">await</span> productRepo<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">&#39;123e4567-e89b-12d3-a456-426614174000&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="standard-repository-methods" tabindex="-1"><a class="header-anchor" href="#standard-repository-methods"><span>Standard Repository Methods</span></a></h2><div class="hint-container tip"><p class="hint-container-title">Real-world Analogy</p><p>Repository methods are like the standard services offered by a storage facility. You can store items (save), retrieve them (find), check if you have something in storage (exists), replace items (update), or remove them altogether (delete)—all without needing to know how the facility is organized internally.</p></div><p>All DomainDrivenJS repositories come with these standard methods:</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>findById(id)</code></td><td>Find an entity by its identifier</td></tr><tr><td><code>findOne(criteria)</code></td><td>Find a single entity matching criteria</td></tr><tr><td><code>findMany(criteria)</code></td><td>Find all entities matching criteria</td></tr><tr><td><code>exists(id)</code></td><td>Check if an entity with the given ID exists</td></tr><tr><td><code>save(entity)</code></td><td>Create or update an entity</td></tr><tr><td><code>update(id, changes)</code></td><td>Update an entity by ID with partial changes</td></tr><tr><td><code>delete(id)</code></td><td>Delete an entity by ID</td></tr><tr><td><code>count(criteria)</code></td><td>Count entities matching criteria</td></tr></tbody></table><h2 id="query-criteria" tabindex="-1"><a class="header-anchor" href="#query-criteria"><span>Query Criteria</span></a></h2><p>DomainDrivenJS repositories support a flexible query criteria syntax:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token comment">// Basic equality</span></span>
<span class="line"><span class="token keyword">await</span> productRepo<span class="token punctuation">.</span><span class="token function">findMany</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Mechanical Keyboard&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Comparison operators</span></span>
<span class="line"><span class="token keyword">await</span> productRepo<span class="token punctuation">.</span><span class="token function">findMany</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">price</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">$lt</span><span class="token operator">:</span> <span class="token number">100</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">await</span> productRepo<span class="token punctuation">.</span><span class="token function">findMany</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">stockLevel</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">$gte</span><span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Logical operators</span></span>
<span class="line"><span class="token keyword">await</span> productRepo<span class="token punctuation">.</span><span class="token function">findMany</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">$or</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">$contains</span><span class="token operator">:</span> <span class="token string">&#39;Keyboard&#39;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">$contains</span><span class="token operator">:</span> <span class="token string">&#39;Mouse&#39;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">price</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">$lt</span><span class="token operator">:</span> <span class="token number">200</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// String operations</span></span>
<span class="line"><span class="token keyword">await</span> productRepo<span class="token punctuation">.</span><span class="token function">findMany</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">$startsWith</span><span class="token operator">:</span> <span class="token string">&#39;Mech&#39;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">await</span> productRepo<span class="token punctuation">.</span><span class="token function">findMany</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">description</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">$contains</span><span class="token operator">:</span> <span class="token string">&#39;ergonomic&#39;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="advanced-repository-patterns" tabindex="-1"><a class="header-anchor" href="#advanced-repository-patterns"><span>Advanced Repository Patterns</span></a></h2><h3 id="specialized-finders" tabindex="-1"><a class="header-anchor" href="#specialized-finders"><span>Specialized Finders</span></a></h3><p>You can create specialized finder methods for common queries:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">const</span> ProductRepository <span class="token operator">=</span> <span class="token function">repository</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;ProductRepository&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">entity</span><span class="token operator">:</span> Product<span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">async</span> <span class="token function">findByCategory</span><span class="token punctuation">(</span><span class="token parameter">categoryId</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">findMany</span><span class="token punctuation">(</span><span class="token punctuation">{</span> categoryId <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token keyword">async</span> <span class="token function">findBestSellers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">findMany</span><span class="token punctuation">(</span></span>
<span class="line">        <span class="token punctuation">{</span> <span class="token literal-property property">salesRank</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">$lte</span><span class="token operator">:</span> <span class="token number">100</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">{</span> <span class="token literal-property property">sort</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">salesRank</span><span class="token operator">:</span> <span class="token string">&#39;asc&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token literal-property property">limit</span><span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="transaction-support" tabindex="-1"><a class="header-anchor" href="#transaction-support"><span>Transaction Support</span></a></h3><p>Repositories can support transactions to ensure data consistency:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token comment">// Using the transaction manager from your adapter</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token punctuation">{</span> transactionManager <span class="token punctuation">}</span> <span class="token operator">=</span> mongoAdapter<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">await</span> transactionManager<span class="token punctuation">.</span><span class="token function">runInTransaction</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">session</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// Pass the session to your repository operations</span></span>
<span class="line">  <span class="token keyword">await</span> productRepo<span class="token punctuation">.</span><span class="token function">updateStock</span><span class="token punctuation">(</span><span class="token string">&#39;product-1&#39;</span><span class="token punctuation">,</span> <span class="token number">45</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> session <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">await</span> orderRepo<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>newOrder<span class="token punctuation">,</span> <span class="token punctuation">{</span> session <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="batch-operations" tabindex="-1"><a class="header-anchor" href="#batch-operations"><span>Batch Operations</span></a></h3><p>For performance, you can perform batch operations:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token comment">// Batch insert</span></span>
<span class="line"><span class="token keyword">await</span> productRepo<span class="token punctuation">.</span><span class="token function">saveMany</span><span class="token punctuation">(</span><span class="token punctuation">[</span>product1<span class="token punctuation">,</span> product2<span class="token punctuation">,</span> product3<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Batch update</span></span>
<span class="line"><span class="token keyword">await</span> productRepo<span class="token punctuation">.</span><span class="token function">updateMany</span><span class="token punctuation">(</span></span>
<span class="line">  <span class="token punctuation">{</span> <span class="token literal-property property">category</span><span class="token operator">:</span> <span class="token string">&#39;keyboards&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">{</span> <span class="token literal-property property">inStock</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Batch delete</span></span>
<span class="line"><span class="token keyword">await</span> productRepo<span class="token punctuation">.</span><span class="token function">deleteMany</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">expiryDate</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">$lt</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="working-with-specifications" tabindex="-1"><a class="header-anchor" href="#working-with-specifications"><span>Working with Specifications</span></a></h2><p>Repositories can work seamlessly with specifications (see <a class="route-link" href="/domaindrivenjs/guide/core/specifications.html">Specifications</a>):</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token comment">// Create a specification</span></span>
<span class="line"><span class="token keyword">const</span> InStockSpec <span class="token operator">=</span> <span class="token function">specification</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;InStock&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token function-variable function">isSatisfiedBy</span><span class="token operator">:</span> <span class="token parameter">product</span> <span class="token operator">=&gt;</span> product<span class="token punctuation">.</span>stockLevel <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token function-variable function">toQuery</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">stockLevel</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">$gt</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Use it with a repository</span></span>
<span class="line"><span class="token keyword">const</span> inStockProducts <span class="token operator">=</span> <span class="token keyword">await</span> productRepo<span class="token punctuation">.</span><span class="token function">findMany</span><span class="token punctuation">(</span>InStockSpec<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Combine specifications</span></span>
<span class="line"><span class="token keyword">const</span> FeaturedAndInStock <span class="token operator">=</span> FeaturedSpec<span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span>InStockSpec<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> featuredInStockProducts <span class="token operator">=</span> <span class="token keyword">await</span> productRepo<span class="token punctuation">.</span><span class="token function">findMany</span><span class="token punctuation">(</span>FeaturedAndInStock<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="repository-composition" tabindex="-1"><a class="header-anchor" href="#repository-composition"><span>Repository Composition</span></a></h2><p>You can compose repositories for more complex operations:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">const</span> OrderService <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">async</span> <span class="token function">placeOrder</span><span class="token punctuation">(</span><span class="token parameter">cart<span class="token punctuation">,</span> customer<span class="token punctuation">,</span> productRepo<span class="token punctuation">,</span> orderRepo</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// Verify all products are in stock</span></span>
<span class="line">    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> item <span class="token keyword">of</span> cart<span class="token punctuation">.</span>items<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">const</span> product <span class="token operator">=</span> <span class="token keyword">await</span> productRepo<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>productId<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>product <span class="token operator">||</span> product<span class="token punctuation">.</span>stockLevel <span class="token operator">&lt;</span> item<span class="token punctuation">.</span>quantity<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Product </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token punctuation">.</span>productId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> not available in requested quantity</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// Create the order</span></span>
<span class="line">    <span class="token keyword">const</span> order <span class="token operator">=</span> Order<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">      <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token function">generateId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">customerId</span><span class="token operator">:</span> customer<span class="token punctuation">.</span>id<span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">items</span><span class="token operator">:</span> cart<span class="token punctuation">.</span>items<span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">&#39;PLACED&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">placedAt</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// Update product stock</span></span>
<span class="line">    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> item <span class="token keyword">of</span> cart<span class="token punctuation">.</span>items<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">await</span> productRepo<span class="token punctuation">.</span><span class="token function">updateStock</span><span class="token punctuation">(</span></span>
<span class="line">        item<span class="token punctuation">.</span>productId<span class="token punctuation">,</span> </span>
<span class="line">        <span class="token punctuation">(</span><span class="token keyword">await</span> productRepo<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>productId<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>stockLevel <span class="token operator">-</span> item<span class="token punctuation">.</span>quantity</span>
<span class="line">      <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// Save the order</span></span>
<span class="line">    <span class="token keyword">return</span> orderRepo<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>order<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="testing-with-repositories" tabindex="-1"><a class="header-anchor" href="#testing-with-repositories"><span>Testing with Repositories</span></a></h2><p>In-memory adapters make testing with repositories simple:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> InMemoryAdapter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;domaindrivenjs/adapters&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&#39;ProductService&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">let</span> productRepo<span class="token punctuation">;</span></span>
<span class="line">  </span>
<span class="line">  <span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// Create a fresh in-memory repository for each test</span></span>
<span class="line">    productRepo <span class="token operator">=</span> ProductRepository<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InMemoryAdapter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  </span>
<span class="line">  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#39;discounting products decreases their price&#39;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// Arrange</span></span>
<span class="line">    <span class="token keyword">const</span> product <span class="token operator">=</span> Product<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">      <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&#39;123&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Test Product&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">price</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">stockLevel</span><span class="token operator">:</span> <span class="token number">10</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">await</span> productRepo<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>product<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// Act</span></span>
<span class="line">    <span class="token keyword">await</span> ProductService<span class="token punctuation">.</span><span class="token function">applyDiscount</span><span class="token punctuation">(</span>productRepo<span class="token punctuation">,</span> <span class="token string">&#39;123&#39;</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// Assert</span></span>
<span class="line">    <span class="token keyword">const</span> updatedProduct <span class="token operator">=</span> <span class="token keyword">await</span> productRepo<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span><span class="token string">&#39;123&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">expect</span><span class="token punctuation">(</span>updatedProduct<span class="token punctuation">.</span>price<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="common-pitfalls" tabindex="-1"><a class="header-anchor" href="#common-pitfalls"><span>Common Pitfalls</span></a></h2><ol><li><strong>Repository per table</strong>: Creating repositories that match database tables instead of aggregates</li><li><strong>Leaking persistence concerns</strong>: Exposing storage-specific details in the repository interface</li><li><strong>Anemic repositories</strong>: Not providing domain-specific query methods, just basic CRUD</li><li><strong>Fat repositories</strong>: Adding business logic that belongs in domain services</li><li><strong>Inconsistent transaction boundaries</strong>: Not considering aggregate boundaries when designing transactions</li></ol><h2 id="best-practices" tabindex="-1"><a class="header-anchor" href="#best-practices"><span>Best Practices</span></a></h2><div class="hint-container tip"><p class="hint-container-title">Real-world Analogy</p><p>Good repository design is like a well-organized kitchen. Ingredients (data) are stored logically (separate repositories for different types), the chef (domain service) requests ingredients as needed, and kitchen staff (repositories) know exactly where to find and how to prepare each ingredient. No one needs to know that milk is on the third shelf of the walk-in cooler—they just ask for milk.</p></div><ol><li><strong>Repository per aggregate</strong>: Create one repository for each aggregate root, not for every entity</li><li><strong>Keep repositories focused</strong>: Each repository should handle one type of entity</li><li><strong>Abstract storage details</strong>: Don&#39;t expose storage-specific code through repositories</li><li><strong>Use dependency injection</strong>: Pass repositories to services that need them</li><li><strong>Optimize for common queries</strong>: Add custom methods for frequently used queries</li><li><strong>Consider caching</strong>: Implement caching strategies for performance-critical repositories</li><li><strong>Respect aggregate boundaries</strong>: Repositories should enforce the consistency boundaries of aggregates</li></ol><h2 id="next-steps" tabindex="-1"><a class="header-anchor" href="#next-steps"><span>Next Steps</span></a></h2><p>Now that you understand repositories, you might want to learn about:</p><ul><li><a class="route-link" href="/domaindrivenjs/guide/core/specifications.html">Specifications</a> - Encapsulate query and validation rules</li><li><a class="route-link" href="/domaindrivenjs/guide/core/domain-events.html">Domain Events</a> - Capture significant changes in your domain</li><li><a class="route-link" href="/domaindrivenjs/guide/advanced/testing.html#testing-repositories">Testing Repositories</a> - Advanced techniques for testing repositories</li></ul></div><!--[--><!--]--></div><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link label" href="https://github.com/MarcoMuellner/DomainDrivenJS/edit/main/docs/guide/core/repositories.md" aria-label="Help us improve this page!" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><svg class="edit-icon" viewbox="0 0 1024 1024"><g fill="currentColor"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></g></svg><!--]--><!--]-->Help us improve this page!<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated:: </span><time class="meta-item-info" datetime="2025-04-22T11:22:12.000Z" data-allow-mismatch>4/22/25, 11:22 AM</time></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: muellnermarco@gmail.com">Marco Müllner</span><!----><!--]--><!--]--></span></div></div></footer><nav class="vp-page-nav" aria-label="page navigation"><a class="route-link auto-link prev" href="/domaindrivenjs/guide/core/aggregates.html" aria-label="Working with Aggregates"><!--[--><div class="hint"><span class="arrow left"></span> Prev</div><div class="link"><span class="external-link">Working with Aggregates</span></div><!--]--></a><a class="route-link auto-link next" href="/domaindrivenjs/guide/core/domain-events.html" aria-label="Working with Domain Events"><!--[--><div class="hint">Next <span class="arrow right"></span></div><div class="link"><span class="external-link">Working with Domain Events</span></div><!--]--></a></nav><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/domaindrivenjs/assets/app-BMHK6CJ7.js" defer></script>
  </body>
</html>
